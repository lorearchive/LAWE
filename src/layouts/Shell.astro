---
const { title, routes, aside = true, toc = true } = Astro.props

import Header from "../components/Header.astro"
import '../styles/global.css'
import '../styles/typography.css' 
import '../styles/components.css'
import Tooltips from "../scripts/tooltips.astro"
import Sidebar from "../components/island/Sidebar.svelte"
---

<!DOCTYPE html>

<html lang="en" class="light">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="stylesheet" href="/styles/global.css" />
        <link rel="stylesheet" href="/styles/typography.css" />
        <link rel="stylesheet" href="/styles/components.css" />

        <link rel="sitemap" href="/sitemap-index.xml" />


        <title>{ title }</title>
    </head>
    
    <body class="page-body">
        <div class="page-grid">
    
        {aside && (
            <aside id="sidebar" class="sidebar">
                <Sidebar client:load routes={routes} />
            </aside>
            )
        }

        <!-- Main content area -->
        <div class="main-content">
            <Header />

            <!-- Main scrollable content -->
            <div id="scrollableWindow" class="content-container">
                <main class={`main-content-area ${toc ? 'main-w-toc' : 'main-no-toc'}`}>
                    <slot />
                </main> 

                {toc && (
                    <aside id="TOCaside">
                        <slot name="TOCbar" />
                    </aside>
                )}
                
            </div>
        </div>

  </div>

  <div id="fnTooltip" role="tooltip">
            <div class="tooltip-content"></div>
            <div id="tooltip-arrow" class="tooltip-arrow"></div>
        </div>

            <Tooltips />
        <script src="/src/scripts/header-scroll.js"></script>
</body>

</html>


<style>
    /* Replaced Tailwind classes with custom CSS */
    .page-body {
        height: 100vh;
        width: 100%;
        overflow: hidden;
    }
    
    .page-grid {
        display: grid;
        grid-template-columns: 16rem minmax(0, 1fr);
        height: 100%;
    }
    
    .sidebar {
        border-right: 1px solid #e5e7eb; /* Using a light gray color */
        overflow-y: auto;
        margin-top: 5rem; /* Equivalent to mt-20 in Tailwind */
    }
    
    .main-content {
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
    }
    
    .content-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        height: 100%;
        overflow-y: auto;
    }
    
    .main-content-area {
        flex: 1;
        position: relative;
        width: 100%;
    }
    
    /* Original styles */
    .main-w-toc { /* with */
        max-width: 900px;
        padding: 16px;
        margin-top: 7rem;
        margin-right: 1em;
        margin-bottom: 0;
    }
    .main-no-toc {
        max-width: 100%;
    }
</style>